<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Import GeoJSON</title>
    <meta http-equiv="cleartype" content="on">
    <link rel="stylesheet" href="//scraperwiki.com/vendor/style/bootstrap.min.css">
    <link rel="stylesheet" href="//scraperwiki.com/style/scraperwiki.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
    <script src="//scraperwiki.com/vendor/js/bootstrap.min.js"></script>
    <script src="//scraperwiki.com/js/scraperwiki.js"></script>
    <script>
      $(function() {
          var execSuccess = function(execOutput) {
            var datasetUrl = "/dataset/" + scraperwiki.box
            scraperwiki.tool.redirect(datasetUrl)
          }
          $('#submit').on('click', function() {
            $(this).addClass('loading').html('Searchingâ€¦')
            var q = $('#q').val()
            scraperwiki.exec("tool/geojson.py " + scraperwiki.shellEscape(q),
              execSuccess)
            scraperwiki.tool.rename("GeoJSON from " + q)
          })
      })
    </script>
  </head>
  <body style="text-align: center">
    <h1>Enter GeoJSON URL</h1>
    <div class="input-append">
      <input type="text" name="q" size="80" id="q"
      placeholder="URL, eg: http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_day.geojson">
      <button class="btn btn-primary" type="submit" id="submit">Import</button>
    </div>
<script>
$(function(){
  $('#q').on('keypress', function(e){
    if(e.which == 13) {
      $('#submit').trigger('click')
    }
  })
})
</script>
  </body>
</html>
